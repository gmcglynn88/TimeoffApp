<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Annual Leave By Day Calculator</title>
  <style>
    :root {
      --primary-color: #63AB8F;
      --primary-dark: #549e7a;
      --text-dark: #2c3e50;
      --border-color: #ddd;
      --light-bg: #f5f7fa;
      --card-bg: #ffffff;
    }
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: var(--light-bg);
      color: var(--text-dark);
    }
    .calculator-container {
      max-width: 1400px;
      margin: 0 auto;
      background: var(--card-bg);
      border-radius: 8px;
      box-shadow: 0 2px 15px rgba(0,0,0,0.05);
      padding: 20px;
    }
    header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }
    #logo {
      width: 60px; /* smaller and less “Look at me!” */
      margin-right: 20px;
    }
    h1 {
      font-size: 1.8em;
      margin: 0;
      color: var(--primary-dark);
      border-bottom: 3px solid var(--primary-color);
      padding-bottom: 5px;
      flex-grow: 1;
    }
    .flex-container {
      display: flex;
      gap: 20px;
    }
    .left-panel, .right-panel {
      background: white;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      padding: 15px;
    }
    .left-panel { flex: 1; }
    .right-panel { flex: 2; }
    .section-title {
      font-weight: bold;
      color: var(--primary-color);
      margin-bottom: 10px;
      font-size: 1.2em;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 15px;
    }
    th, td {
      border: 1px solid var(--border-color);
      padding: 8px;
      text-align: left;
    }
    th {
      background: var(--primary-color);
      color: #fff;
      font-weight: normal;
    }
    .input-cell {
      width: 100%;
      box-sizing: border-box;
      padding: 4px 6px;
      border: 1px solid var(--border-color);
      border-radius: 3px;
      background: #f8f9fa;
    }
    .calculation-cell {
      background: #e9f7ef;
      border: 1px solid var(--primary-color);
      border-radius: 3px;
      padding: 4px 6px;
    }
    .percent-symbol::after {
      content: "%";
      margin-left: 2px;
    }
    /* Small tweak for scrollable right panel if too tall */
    .right-panel { max-height: 75vh; overflow-y: auto; }
  </style>
</head>
<body>
  <div class="calculator-container">
    <header>
      <img id="logo" src="yourtime-logo.png" alt="YourTime Logo">
      <h1>Annual Leave By Day Calculator</h1>
    </header>
    <div class="flex-container">
      <!-- LEFT SIDE -->
      <div class="left-panel">
        <div class="section-title">FTE &amp; Leave Settings</div>
        <table>
          <tr><th>Variable</th><th>Value</th></tr>
          <tr>
            <td>FTE definition (Hours)</td>
            <td><input type="number" class="input-cell" id="fte-hours" value="40" min="1"></td>
          </tr>
          <tr>
            <td>Annual Leave Allocation (Days)</td>
            <td><input type="number" class="input-cell" id="annual-leave-days" value="33" min="0"></td>
          </tr>
        </table>

        <div class="section-title">Staffing Inputs</div>
        <table>
          <tr><th>Variable</th><th>Value</th></tr>
          <tr>
            <td>Agents In Staffing Group</td>
            <td><input type="number" class="input-cell" id="agents-count" value="100" min="1"></td>
          </tr>
          <tr>
            <td>Average Weekly Hours Per Agent</td>
            <td><input type="number" class="input-cell" id="avg-weekly-hours" value="32" min="1" max="40"></td>
          </tr>
          <tr>
            <td>Holiday Weekly Target/Maximum %</td>
            <td>
              <input type="number" class="input-cell" id="holiday-percentage" value="14" min="0" max="100">
              <span class="percent-symbol"></span>
            </td>
          </tr>
        </table>

        <div class="section-title">Key Calculation</div>
        <table>
          <tr><th>Metric</th><th>Result</th></tr>
          <tr>
            <td>Weekly Holiday Allocation Hours</td>
            <td class="calculation-cell" id="weekly-holiday-hours"></td>
          </tr>
        </table>

        <div class="section-title">Day-of-Week Distribution</div>
        <table>
          <tr><th>Day</th><th>%</th><th>Hours</th></tr>
          <tbody id="day-distribution">
            <tr><td>Mon</td><td><input type="number" class="input-cell" id="mon-percent" value="20" min="0" max="100"><span class="percent-symbol"></span></td><td class="calculation-cell" id="mon-hours"></td></tr>
            <tr><td>Tue</td><td><input type="number" class="input-cell" id="tue-percent" value="17" min="0" max="100"><span class="percent-symbol"></span></td><td class="calculation-cell" id="tue-hours"></td></tr>
            <tr><td>Wed</td><td><input type="number" class="input-cell" id="wed-percent" value="16" min="0" max="100"><span class="percent-symbol"></span></td><td class="calculation-cell" id="wed-hours"></td></tr>
            <tr><td>Thu</td><td><input type="number" class="input-cell" id="thu-percent" value="15" min="0" max="100"><span class="percent-symbol"></span></td><td class="calculation-cell" id="thu-hours"></td></tr>
            <tr><td>Fri</td><td><input type="number" class="input-cell" id="fri-percent" value="14" min="0" max="100"><span class="percent-symbol"></span></td><td class="calculation-cell" id="fri-hours"></td></tr>
            <tr><td>Sat</td><td><input type="number" class="input-cell" id="sat-percent" value="10" min="0" max="100"><span class="percent-symbol"></span></td><td class="calculation-cell" id="sat-hours"></td></tr>
            <tr><td>Sun</td><td><input type="number" class="input-cell" id="sun-percent" value="8"  min="0" max="100"><span class="percent-symbol"></span></td><td class="calculation-cell" id="sun-hours"></td></tr>
            <tr><td><strong>Total</strong></td><td class="calculation-cell" id="total-percent"></td><td class="calculation-cell" id="total-hours"></td></tr>
          </tbody>
        </table>
      </div>

      <!-- RIGHT SIDE -->
      <div class="right-panel">
        <div class="section-title">Monthly Allocation %</div>
        <table>
          <tr><th>Month</th><th>%</th></tr>
          <tbody id="monthly-inputs">
            <!-- JS populator -->
          </tbody>
        </table>

        <div class="section-title">Daily Allocation By Month</div>
        <table>
          <tr>
            <th>Month</th><th>%</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th><th>Sun</th>
          </tr>
          <tbody id="month-allocation">
            <!-- JS populator -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- SUMMARY -->
    <div class="left-panel" style="margin-top:20px;">
      <div class="section-title">Summary</div>
      <table>
        <tr><th>Metric</th><th>Value</th></tr>
        <tr><td>Contracted Hours</td><td class="calculation-cell" id="contracted-hours"></td></tr>
        <tr><td>Allocated Hours</td><td class="calculation-cell" id="allocated-hours"></td></tr>
      </table>
    </div>
  </div>

  <script>
    // months default
    const monthlyAllocations = [
      { month:'Jan',allocation:10},{ month:'Feb',allocation:12},{ month:'Mar',allocation:14},
      { month:'Apr',allocation:14},{ month:'May',allocation:12},{ month:'Jun',allocation:10},
      { month:'Jul',allocation:16},{ month:'Aug',allocation:18},{ month:'Sep',allocation:10},
      { month:'Oct',allocation:8},{ month:'Nov',allocation:8},{ month:'Dec',allocation:25}
    ];

    function buildMonthlyInputs(){
      const tbody = document.getElementById('monthly-inputs');
      tbody.innerHTML = '';
      monthlyAllocations.forEach((m,i)=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${m.month}</td>
          <td>
            <input type="number" class="input-cell month-alloc" data-index="${i}"
                   value="${m.allocation}" min="0" max="100" step="0.1">
            <span class="percent-symbol"></span>
          </td>`;
        tbody.appendChild(tr);
      });
      document.querySelectorAll('.month-alloc').forEach(inp=>{
        inp.addEventListener('input',calculate);
      });
    }

    function calculate(){
      // inputs
      const fteH = +document.getElementById('fte-hours').value || 40;
      const leaveD = +document.getElementById('annual-leave-days').value || 33;
      const agents = +document.getElementById('agents-count').value || 100;
      const avgH = +document.getElementById('avg-weekly-hours').value || 32;
      const holPct = (+document.getElementById('holiday-percentage').value||14)/100;

      // contracted
      const contracted = agents*avgH*52;
      document.getElementById('contracted-hours').textContent = contracted.toFixed(0) + ' hrs';

      // weekly holiday hours
      const weeklyH = Math.round(agents*avgH*holPct);
      document.getElementById('weekly-holiday-hours').textContent = weeklyH + ' hrs';

      // day distribution
      const days = ['mon','tue','wed','thu','fri','sat','sun'];
      let totalP=0;
      days.forEach(d=>{
        const pct = +document.getElementById(`${d}-percent`).value||0;
        totalP += pct;
        document.getElementById(`${d}-hours`).textContent = Math.round(pct/100*weeklyH) + ' hrs';
      });
      document.getElementById('total-percent').textContent = totalP.toFixed(1)+'%';
      document.getElementById('total-hours').textContent = weeklyH+' hrs';

      // month-allocation table
      const monthT = document.getElementById('month-allocation');
      monthT.innerHTML = '';
      let sumAllocs=0;
      monthlyAllocations.forEach((m,i)=>{
        const pctM = (+document.querySelector(`.month-alloc[data-index="${i}"]`).value||0)/100;
        const tr = document.createElement('tr');
        let row = `<td>${m.month}</td><td>${(pctM*100).toFixed(1)}%<span class="percent-symbol"></span></td>`;
        days.forEach(d=>{
          const dayPct = (+document.getElementById(`${d}-percent`).value||0)/100;
          const alloc = Math.round(dayPct*agents*avgH*pctM);
          row += `<td class="calculation-cell">${alloc}</td>`;
          sumAllocs += alloc;
        });
        tr.innerHTML = row;
        monthT.appendChild(tr);
      });

      const allocHours = sumAllocs * (52/12);
      document.getElementById('allocated-hours').textContent = allocHours.toFixed(0)+' hrs';
    }

    // listeners
    document.querySelectorAll('#fte-hours, #annual-leave-days, #agents-count, #avg-weekly-hours, #holiday-percentage, #day-distribution input')
      .forEach(i=> i.addEventListener('input', calculate));

    // init
    buildMonthlyInputs();
    calculate();
  </script>
</body>
</html>
